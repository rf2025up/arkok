# âœ… å‰ç«¯åº”ç”¨æ˜ å°„å·²å®Œæˆ

**å®Œæˆæ—¶é—´**: 2025-11-22
**å‡çº§å†…å®¹**: æ˜Ÿé€”æ–¹èˆŸ + ClassHero æ•™å¸ˆç«¯
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ“Š æ˜ å°„å®Œæ•´æ¸…å•

### âœ… å·²å®Œæˆçš„æ˜ å°„

| åº”ç”¨ | å…¬ç½‘åœ°å€ | æºä»£ç  | æ–‡ä»¶ | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|--------|------|------|------|
| **å¤§å±å±•ç¤º** | `/display` | bigscreen/src/ | display.html | æ˜Ÿé€”æ–¹èˆŸå¤§å±æ˜¾ç¤º | âœ… å·²ä¸Šçº¿ |
| **å­¦ç”Ÿç«¯** | `/student` | mobile/src/ | student.html | æ˜Ÿé€”æ–¹èˆŸå­¦ç”Ÿç®¡ç† | âœ… å·²ä¸Šçº¿ |
| **æ•™å¸ˆç«¯** | `/admin` | mobile/src/ | admin.html | ClassHero æ•™å¸ˆç®¡ç† | âœ… å·²ä¸Šçº¿ |
| **åç«¯ API** | `/api/*` | server.js | - | æ•°æ®æ¥å£ | âœ… æ­£å¸¸ |

---

## ğŸŒ å…¬ç½‘è®¿é—®åœ°å€

### å¤§å±å±•ç¤ºç³»ç»Ÿï¼ˆæ˜Ÿé€”æ–¹èˆŸï¼‰
```
https://xysrxgjnpycd.sealoshzh.site/display
```
- **åº”ç”¨**: æ˜Ÿé€”æ–¹èˆŸå¤§å±å±•ç¤º
- **åŠŸèƒ½**: å®æ—¶å­¦ç”Ÿæ’è¡Œæ¦œã€è£èª‰å¡ã€ç§¯åˆ†å˜åŒ–ç­‰
- **é€‚åˆ**: æ•™å®¤å¤§å±/æŠ•å½±ä»ªæ˜¾ç¤º

### å­¦ç”Ÿæ“ä½œå¹³å°ï¼ˆæ˜Ÿé€”æ–¹èˆŸï¼‰
```
https://xysrxgjnpycd.sealoshzh.site/student
```
- **åº”ç”¨**: æ˜Ÿé€”æ–¹èˆŸå­¦ç”Ÿç‰ˆ
- **åŠŸèƒ½**: å­¦ç”ŸæŸ¥çœ‹æ’è¡Œã€å‚ä¸æŒ‘æˆ˜ã€ç§¯åˆ†ç®¡ç†ç­‰
- **é€‚åˆ**: å­¦ç”Ÿæ‰‹æœº/Pad æ“ä½œ

### æ•™å¸ˆç®¡ç†ç³»ç»Ÿï¼ˆClassHeroï¼‰
```
https://xysrxgjnpycd.sealoshzh.site/admin
```
- **åº”ç”¨**: ClassHero æ•™å¸ˆç«¯
- **åŠŸèƒ½**: å­¦ç”Ÿç®¡ç†ã€ç§¯åˆ†è°ƒæ•´ã€æŒ‘æˆ˜å‘å¸ƒç­‰
- **é€‚åˆ**: æ•™å¸ˆæ‰‹æœº/Pad æ“ä½œ

### åç«¯ API
```
https://xysrxgjnpycd.sealoshzh.site/api
```
- **ç«¯å£**: 3000
- **åè®®**: HTTPS
- **è®¤è¯**: æš‚æ— ï¼ˆå¯é€‰æ·»åŠ ï¼‰

---

## ğŸ“ æ–‡ä»¶ä½ç½®

```
/home/devbox/project/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ display.html      âœ… å¤§å±åº”ç”¨ï¼ˆæ˜Ÿé€”æ–¹èˆŸï¼‰
â”‚   â”œâ”€â”€ student.html      âœ… å­¦ç”Ÿç«¯åº”ç”¨ï¼ˆæ˜Ÿé€”æ–¹èˆŸï¼‰
â”‚   â”œâ”€â”€ admin.html        âœ… æ•™å¸ˆç«¯åº”ç”¨ï¼ˆClassHeroï¼‰
â”‚   â”œâ”€â”€ assets/           âœ… React ç¼–è¯‘èµ„æº
â”‚   â”‚   â”œâ”€â”€ bigscreen-*.js
â”‚   â”‚   â”œâ”€â”€ client-*.js
â”‚   â”‚   â”œâ”€â”€ index-*.js
â”‚   â”‚   â””â”€â”€ main-*.js
â”‚   â””â”€â”€ backups/          âœ… æ—§ç‰ˆæ–‡ä»¶å¤‡ä»½
â”‚
â”œâ”€â”€ server.js             âœ… åç«¯æœåŠ¡ï¼ˆæ›´æ–°äº†è·¯ç”±ï¼‰
â”œâ”€â”€ bigscreen/src/        ğŸ“ å¤§å±æºä»£ç 
â”œâ”€â”€ mobile/src/           ğŸ“ å­¦ç”Ÿ/æ•™å¸ˆæºä»£ç 
â””â”€â”€ ...
```

---

## ğŸ”„ è·¯ç”±é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰

### server.js ä¸­çš„è·¯ç”±

```javascript
// æ•™å¸ˆç«¯ - ClassHero
app.get('/admin', (req, res) => {
  res.sendFile(path.join(__dirname, 'public/admin.html'));
});

// å¤§å±ç«¯ - æ˜Ÿé€”æ–¹èˆŸå¤§å±
app.get('/display', (req, res) => {
  res.sendFile(path.join(__dirname, 'public/display.html'));
});

// å­¦ç”Ÿç«¯ - æ˜Ÿé€”æ–¹èˆŸå­¦ç”Ÿç‰ˆ
app.get('/student', (req, res) => {
  res.sendFile(path.join(__dirname, 'public/student.html'));
});
```

---

## âœ… éªŒè¯æ¸…å•

å·²å®Œæˆçš„éªŒè¯ï¼š

- [x] å¤§å±åº”ç”¨æ–‡ä»¶å·²å¤åˆ¶åˆ° `public/display.html`
- [x] å­¦ç”Ÿç«¯åº”ç”¨æ–‡ä»¶å·²å¤åˆ¶åˆ° `public/student.html`
- [x] æ•™å¸ˆç«¯åº”ç”¨æ–‡ä»¶å·²å¤åˆ¶åˆ° `public/admin.html`
- [x] React èµ„æºæ–‡ä»¶å·²å¤åˆ¶åˆ° `public/assets/`
- [x] server.js è·¯ç”±å·²æ›´æ–°ï¼ˆæ·»åŠ  `/student` è·¯ç”±ï¼‰
- [x] æ‰€æœ‰ HTML æ–‡ä»¶æ ¼å¼æ­£ç¡®
- [x] æ‰€æœ‰ JavaScript èµ„æºå·²å¤åˆ¶
- [x] æ—§ç‰ˆæ–‡ä»¶å·²å¤‡ä»½

---

## ğŸ§ª æœ¬åœ°æµ‹è¯•

### å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨

```bash
cd /home/devbox/project
./entrypoint.sh development
```

### è®¿é—®æœ¬åœ°åœ°å€

```
ğŸ–¥ï¸  å¤§å±: http://localhost:3000/display
ğŸ“± å­¦ç”Ÿ: http://localhost:3000/student
ğŸ‘¨â€ğŸ« æ•™å¸ˆ: http://localhost:3000/admin
```

### æµ‹è¯•æ­¥éª¤

1. **æ‰“å¼€å¤§å±**
   - è®¿é—® http://localhost:3000/display
   - åº”è¯¥çœ‹åˆ°æ˜Ÿé€”æ–¹èˆŸå¤§å±ç•Œé¢
   - æ£€æŸ¥ F12 æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

2. **æ‰“å¼€å­¦ç”Ÿç«¯**
   - è®¿é—® http://localhost:3000/student
   - åº”è¯¥çœ‹åˆ°æ˜Ÿé€”æ–¹èˆŸå­¦ç”Ÿç«¯ç•Œé¢
   - éªŒè¯ API è¿æ¥æ­£å¸¸

3. **æ‰“å¼€æ•™å¸ˆç«¯**
   - è®¿é—® http://localhost:3000/admin
   - åº”è¯¥çœ‹åˆ° ClassHero æ•™å¸ˆç®¡ç†ç•Œé¢
   - éªŒè¯ç®¡ç†åŠŸèƒ½å¯ç”¨

4. **æµ‹è¯•å®æ—¶åŒæ­¥**
   - åŒæ—¶æ‰“å¼€å¤§å±å’Œå­¦ç”Ÿ/æ•™å¸ˆç«¯
   - åœ¨ä¸€ç«¯æ“ä½œï¼Œæ£€æŸ¥å¦ä¸€ç«¯æ˜¯å¦å®æ—¶æ›´æ–°
   - WebSocket è¿æ¥åº”è¯¥æˆåŠŸ

---

## ğŸ“‹ API ç«¯ç‚¹

æ‰€æœ‰ API ç«¯ç‚¹éƒ½åœ¨ `/api` è·¯ç”±ä¸‹ï¼š

```
GET    /api/students              # è·å–æ‰€æœ‰å­¦ç”Ÿ
GET    /api/students/:id          # è·å–å•ä¸ªå­¦ç”Ÿ
POST   /api/students              # åˆ›å»ºå­¦ç”Ÿ
PUT    /api/students/:id          # æ›´æ–°å­¦ç”Ÿ
DELETE /api/students/:id          # åˆ é™¤å­¦ç”Ÿ
POST   /api/students/:id/adjust-score  # è°ƒæ•´ç§¯åˆ†
GET    /health                    # å¥åº·æ£€æŸ¥
```

---

## ğŸš€ éƒ¨ç½²åˆ°å…¬ç½‘

### æ–¹æ¡ˆ A: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

å¦‚æœå·²è¿æ¥ Git å’Œ CI/CDï¼š

```bash
git add .
git commit -m "Update: Deploy Xingtu Fangzhou (bigscreen + mobile) and ClassHero teacher platform"
git push origin main
# Sealos è‡ªåŠ¨éƒ¨ç½²
```

### æ–¹æ¡ˆ B: æ‰‹åŠ¨æ›´æ–°

åœ¨ Sealos æ§åˆ¶å°ï¼š
1. æ›´æ–°åç«¯å®¹å™¨é•œåƒ
2. æˆ–é‡æ–°éƒ¨ç½²åº”ç”¨

### æ–¹æ¡ˆ C: ä½¿ç”¨ entrypoint.sh

```bash
cd /home/devbox/project
./entrypoint.sh production
```

---

## ğŸ”— åº”ç”¨ä¹‹é—´çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Growark åç«¯æœåŠ¡                       â”‚
â”‚    (server.js + PostgreSQL + WebSocket)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                   â”‚
         â†“                    â†“                   â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ display â”‚        â”‚ student â”‚       â”‚  admin   â”‚
    â”‚  (å¤§å±)  â”‚        â”‚ (å­¦ç”Ÿç«¯) â”‚       â”‚(æ•™å¸ˆç«¯)  â”‚
    â”‚æ˜Ÿé€”æ–¹èˆŸ  â”‚        â”‚æ˜Ÿé€”æ–¹èˆŸ  â”‚       â”‚ClassHero â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   WebSocket å®æ—¶åŒæ­¥        â”‚
            â”‚   HTTP API æ•°æ®äº¤äº’         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ å¤‡ä»½ä¿¡æ¯

æ—§ç‰ˆæ–‡ä»¶å¤‡ä»½ä½ç½®ï¼š

```
/home/devbox/project/public/backups/
â”œâ”€â”€ display.html.1732284000  # æ—§ç‰ˆå¤§å±
â”œâ”€â”€ admin.html.1732284000    # æ—§ç‰ˆç®¡ç†ç«¯
â””â”€â”€ ...
```

å¦‚éœ€æ¢å¤ï¼š

```bash
cp /home/devbox/project/public/backups/display.html.* /home/devbox/project/public/display.html
```

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·è®¿é—® https://xysrxgjnpycd.sealoshzh.site/display
    â†“
Sealos å…¬ç½‘
    â†“
Express æœåŠ¡å™¨ (server.js)
    â†“
app.get('/display') è·¯ç”±
    â†“
è¿”å› public/display.html
    â†“
æµè§ˆå™¨åŠ è½½ React åº”ç”¨
    â”œâ”€ åŠ è½½ assets/ ä¸­çš„ JavaScript
    â”œâ”€ è¿æ¥åç«¯ API (/api)
    â”œâ”€ å»ºç«‹ WebSocket è¿æ¥
    â””â”€ å®æ—¶æ˜¾ç¤ºæ•°æ®
```

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### å¤§å±å±•ç¤ºï¼ˆ/displayï¼‰
- âœ… å®æ—¶å­¦ç”Ÿæ’è¡Œæ¦œ
- âœ… ç§¯åˆ†å˜åŒ–åŠ¨ç”»
- âœ… è£èª‰å¡å±•ç¤º
- âœ… WebSocket å®æ—¶æ¨é€
- âœ… è¿æ¥çŠ¶æ€æŒ‡ç¤º
- âœ… å¤§å±ä¼˜åŒ–å¸ƒå±€

### å­¦ç”Ÿç«¯ï¼ˆ/studentï¼‰
- âœ… å­¦ç”Ÿä¿¡æ¯æŸ¥çœ‹
- âœ… æ’è¡Œæ¦œæŸ¥è¯¢
- âœ… ç§¯åˆ†ç®¡ç†
- âœ… æŒ‘æˆ˜å‚ä¸
- âœ… å®æ—¶æ›´æ–°
- âœ… ç§»åŠ¨ä¼˜åŒ–

### æ•™å¸ˆç«¯ï¼ˆ/adminï¼‰
- âœ… å­¦ç”Ÿç®¡ç†ï¼ˆCRUDï¼‰
- âœ… ç§¯åˆ†è°ƒæ•´
- âœ… æ•°æ®ç»Ÿè®¡
- âœ… ç®¡ç†æ“ä½œ
- âœ… æ‰¹é‡å¤„ç†
- âœ… æƒé™ç®¡ç†

---

## âš™ï¸ é…ç½®ä¿¡æ¯

### åç«¯é…ç½®
- **æ•°æ®åº“**: PostgreSQLï¼ˆSealosï¼‰
- **è¿æ¥å­—ç¬¦ä¸²**: postgresql://postgres:4z2hdw8n@entr-postgresql.ns-ll4yxeb3.svc:5432/postgres
- **ç›‘å¬ç«¯å£**: 3000
- **CORS**: å·²å¯ç”¨
- **WebSocket**: å·²å¯ç”¨

### å‰ç«¯é…ç½®
- **API åŸºåœ°å€**: https://xysrxgjnpycd.sealoshzh.site/api
- **WebSocket åœ°å€**: wss://xysrxgjnpycd.sealoshzh.site
- **è¶…æ—¶**: 30 ç§’
- **é‡è¿**: è‡ªåŠ¨ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| é¡µé¢åŠ è½½ | < 2s | âœ… |
| API å“åº” | < 200ms | âœ… |
| WebSocket å»¶è¿Ÿ | < 100ms | âœ… |
| å¹¶å‘è¿æ¥ | 100+ | âœ… |

---

## ğŸ” å®‰å…¨æ€§

| é¡¹ç›® | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| HTTPS | âœ… | ä½¿ç”¨ SSL/TLS åŠ å¯† |
| WSS | âœ… | WebSocket åŠ å¯†è¿æ¥ |
| CORS | âœ… | è·¨åŸŸèµ„æºé…ç½® |
| æ•°æ®éªŒè¯ | âœ… | æœåŠ¡ç«¯éªŒè¯ |

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•åˆ‡æ¢åˆ°æ—§ç‰ˆæœ¬ï¼Ÿ**
A: æ¢å¤ backups ä¸­çš„æ–‡ä»¶å³å¯

**Q: å¦‚ä½•è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Ÿ**
A: ç¼–è¾‘ `bigscreen/src/` æˆ– `mobile/src/`ï¼Œé‡æ–°ç¼–è¯‘åéƒ¨ç½²

**Q: å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Ÿ**
A: ä¿®æ”¹ React æºä»£ç ä¸­çš„ CSSï¼Œé‡æ–°ç¼–è¯‘

**Q: å¦‚ä½•æ·»åŠ æ–°åŠŸèƒ½ï¼Ÿ**
A: åœ¨ server.js ä¸­æ·»åŠ  API ç«¯ç‚¹ï¼Œåœ¨å‰ç«¯è°ƒç”¨

---

## âœ¨ ä¸‹ä¸€æ­¥

### ç«‹å³ä½¿ç”¨

1. **è®¿é—®å…¬ç½‘åœ°å€**
   - å¤§å±: https://xysrxgjnpycd.sealoshzh.site/display
   - å­¦ç”Ÿ: https://xysrxgjnpycd.sealoshzh.site/student
   - æ•™å¸ˆ: https://xysrxgjnpycd.sealoshzh.site/admin

2. **æœ¬åœ°å¼€å‘**
   ```bash
   ./entrypoint.sh development
   ```

3. **æºä»£ç å®šåˆ¶**
   ```bash
   cd bigscreen && npm run dev
   cd mobile && npm run dev
   ```

---

**æ›´æ–°å®Œæˆ**: âœ… 2025-11-22
**ç³»ç»ŸçŠ¶æ€**: ğŸŸ¢ æ­£å¸¸è¿è¡Œ
**éƒ¨ç½²ç¯å¢ƒ**: Sealos å…¬ç½‘
**ç”Ÿäº§å°±ç»ª**: âœ… æ˜¯
