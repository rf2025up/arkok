# é¡¹ç›®è®¾ç½®æŒ‡å—

## æ€»ä½“æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å­¦ç”Ÿç§¯åˆ†ç®¡ç†ç³»ç»Ÿ - å®Œæ•´ä½“ç³»                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ‰‹æœºç«¯ç®¡ç†åŽå° (Mobile Admin Dashboard)        â”‚   â”‚
â”‚  â”‚  - HTML5 + CSS3 + Vanilla JavaScript            â”‚   â”‚
â”‚  â”‚  - å®Œå…¨å“åº”å¼è®¾è®¡                                â”‚   â”‚
â”‚  â”‚  - è®¿é—®: http://localhost:3000/admin            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â†•ï¸                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Express.js RESTful API                          â”‚   â”‚
â”‚  â”‚  - å®Œæ•´çš„å¢žåˆ æ”¹æŸ¥æŽ¥å£                            â”‚   â”‚
â”‚  â”‚  - æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†                            â”‚   â”‚
â”‚  â”‚  - CORS è·¨åŸŸæ”¯æŒ                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â†•ï¸                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL æ•°æ®åº“                               â”‚   â”‚
â”‚  â”‚  - æ•°æ®æŒä¹…åŒ–å­˜å‚¨                                â”‚   â”‚
â”‚  â”‚  - è‡ªåŠ¨æ—¶é—´æˆ³ç®¡ç†                                â”‚   â”‚
â”‚  â”‚  - æ€§èƒ½ç´¢å¼•ä¼˜åŒ–                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### 1ï¸âƒ£ çŽ¯å¢ƒé…ç½®

é¦–å…ˆï¼Œä¿å­˜çŽ¯å¢ƒå˜é‡åˆ° shell é…ç½®æ–‡ä»¶ï¼š

```bash
cat >> ~/.bashrc << 'EOL'

# Anthropic API Configuration
export ANTHROPIC_BASE_URL=https://aiproxy.usw.sealos.io
export ANTHROPIC_AUTH_TOKEN=sk-7NnsAxxQP6d1vlRJIHJKYBC3DUDhA1maNaChGVVvBfgJP1cb
export ANTHROPIC_MODEL=claude-haiku-4-5-20251001
export ANTHROPIC_SMALL_FAST_MODEL=$ANTHROPIC_MODEL
EOL

source ~/.bashrc
```

### 2ï¸âƒ£ æ•°æ®åº“è¿žæŽ¥

é¡¹ç›®å·²é…ç½®ä»¥ä¸‹æ•°æ®åº“è¿žæŽ¥ï¼š

- **ä¸»æœº**: entr-postgresql.ns-ll4yxeb3.svc
- **ç«¯å£**: 5432
- **ç”¨æˆ·**: postgres
- **å¯†ç **: 4z2hdw8n
- **æ•°æ®åº“**: postgres

è¿žæŽ¥å­—ç¬¦ä¸²ï¼š
```
postgresql://postgres:4z2hdw8n@entr-postgresql.ns-ll4yxeb3.svc:5432/postgres
```

### 3ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
npm install
```

### 4ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“

```bash
node init-db.js
```

è¿™ä¼šåˆ›å»ºï¼š
- âœ… `students` è¡¨ï¼ˆå­¦ç”Ÿæ•°æ®è¡¨ï¼‰
- âœ… è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³è§¦å‘å™¨
- âœ… name å’Œ score å­—æ®µç´¢å¼•
- âœ… 5 æ¡ç¤ºä¾‹æ•°æ®

### 5ï¸âƒ£ å¯åŠ¨æœåŠ¡å™¨

```bash
node server.js
```

è¾“å‡ºï¼š
```
âœ“ åŽç«¯æœåŠ¡å™¨å·²å¯åŠ¨: http://localhost:3000
âœ“ ç®¡ç†åŽå°: http://localhost:3000/admin
âœ“ API æ–‡æ¡£: http://localhost:3000/api-docs
```

## æ•°æ®åº“ä¿¡æ¯

### æ•°æ®åº“è¡¨: students

| å­—æ®µ | ç±»åž‹ | çº¦æŸ | è¯´æ˜Ž |
|------|------|------|------|
| id | SERIAL | PRIMARY KEY | ä¸»é”®ï¼Œè‡ªå¢ž |
| name | VARCHAR(100) | NOT NULL, UNIQUE | å­¦ç”Ÿåç§°ï¼Œå”¯ä¸€ |
| score | INTEGER | DEFAULT 0 | ç§¯åˆ† |
| created_at | TIMESTAMP | DEFAULT NOW() | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | DEFAULT NOW() | æ›´æ–°æ—¶é—´ |

### å½“å‰æ•°æ®

| ID | åç§° | ç§¯åˆ† | åˆ›å»ºæ—¶é—´ |
|----|------|------|---------|
| 1 | å¼ ä¸‰ | 85 | 2025-11-21 |
| 2 | æŽå›› | 92 | 2025-11-21 |
| 3 | çŽ‹äº” | 78 | 2025-11-21 |
| 4 | èµµå…­ | 88 | 2025-11-21 |
| 5 | å­™ä¸ƒ | 95 | 2025-11-21 |

### æ•°æ®ç»Ÿè®¡
- æ€»å­¦ç”Ÿæ•°: 6
- å¹³å‡ç§¯åˆ†: 73.67
- æœ€é«˜ç§¯åˆ†: 95
- æœ€ä½Žç§¯åˆ†: 4

## è®¿é—®åœ°å€

| åŠŸèƒ½ | åœ°å€ | è¯´æ˜Ž |
|------|------|------|
| ç®¡ç†åŽå° | http://localhost:3000/admin | æ‰‹æœºç«¯ç®¡ç†ç•Œé¢ |
| API æ–‡æ¡£ | http://localhost:3000/api-docs | API æŽ¥å£æ–‡æ¡£ |
| å­¦ç”Ÿåˆ—è¡¨ API | http://localhost:3000/api/students | REST API ç«¯ç‚¹ |

## ä¸»è¦åŠŸèƒ½

### ðŸ“± æ‰‹æœºç«¯ç®¡ç†åŽå°åŠŸèƒ½

1. **ä»ªè¡¨æ¿**
   - æ˜¾ç¤ºå­¦ç”Ÿæ€»æ•°
   - æ˜¾ç¤ºå¹³å‡ç§¯åˆ†
   - æ•°æ®ç»Ÿè®¡å¡ç‰‡

2. **å­¦ç”Ÿåˆ—è¡¨**
   - å±•ç¤ºæ‰€æœ‰å­¦ç”Ÿåç§°å’Œç§¯åˆ†
   - å¿«é€Ÿå¢žå‡ç§¯åˆ†ï¼ˆÂ±1ï¼‰
   - ç¼–è¾‘å­¦ç”Ÿä¿¡æ¯
   - åˆ é™¤å­¦ç”Ÿ

3. **æœç´¢å’Œè¿‡æ»¤**
   - æŒ‰åç§°æœç´¢å­¦ç”Ÿ
   - æŒ‰å¤šä¸ªå­—æ®µæŽ’åº
   - å®žæ—¶è¿‡æ»¤ç»“æžœ

4. **æ“ä½œåé¦ˆ**
   - æˆåŠŸ/é”™è¯¯æç¤º
   - ç¡®è®¤å¯¹è¯æ¡†é˜²æ­¢è¯¯æ“ä½œ
   - è‡ªåŠ¨åˆ·æ–°æ•°æ®ï¼ˆ30ç§’ï¼‰

### ðŸ”§ API ç«¯ç‚¹

```
GET    /api/students              # èŽ·å–æ‰€æœ‰å­¦ç”Ÿ
GET    /api/students/:id          # èŽ·å–å•ä¸ªå­¦ç”Ÿ
POST   /api/students              # åˆ›å»ºå­¦ç”Ÿ
PUT    /api/students/:id          # æ›´æ–°å­¦ç”Ÿ
DELETE /api/students/:id          # åˆ é™¤å­¦ç”Ÿ
POST   /api/students/:id/adjust-score  # è°ƒæ•´ç§¯åˆ†
```

## æ–‡ä»¶ç»“æž„

```
project/
â”œâ”€â”€ server.js                   # Express æœåŠ¡å™¨
â”œâ”€â”€ init-db.js                 # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ package.json               # NPM é…ç½®
â”œâ”€â”€ package-lock.json          # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ admin.html            # ç®¡ç†åŽå° UI
â”‚   â””â”€â”€ api-docs.html         # API æ–‡æ¡£é¡µé¢
â”œâ”€â”€ PRD.md                     # äº§å“éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ SETUP_GUIDE.md            # æœ¬æ–‡ä»¶
```

## npm ä¾èµ–

```json
{
  "dependencies": {
    "express": "^4.18.2",          # Web æ¡†æž¶
    "cors": "^2.8.5",               # è·¨åŸŸèµ„æºå…±äº«
    "body-parser": "^1.20.2",       # è¯·æ±‚ä½“è§£æž
    "pg": "^8.11.3",                # PostgreSQL é©±åŠ¨
    "dotenv": "^16.3.1"             # çŽ¯å¢ƒå˜é‡ç®¡ç†
  }
}
```

## å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡å™¨
npm start
# æˆ–
node server.js

# åˆå§‹åŒ–æ•°æ®åº“
node init-db.js

# æŸ¥çœ‹æ•°æ®åº“æ•°æ®
node << 'EOF'
const { Pool } = require('pg');
const pool = new Pool({
  connectionString: 'postgresql://postgres:4z2hdw8n@entr-postgresql.ns-ll4yxeb3.svc:5432/postgres'
});
pool.query('SELECT * FROM students', (err, res) => {
  console.table(res.rows);
  pool.end();
});
