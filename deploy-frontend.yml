apiVersion: apps/v1
kind: Deployment
metadata:
  name: growark-bigscreen
  namespace: default
spec:
  replicas: 2
  selector:
    matchLabels:
      app: growark-bigscreen
  template:
    metadata:
      labels:
        app: growark-bigscreen
    spec:
      containers:
      - name: bigscreen
        image: node:18-alpine
        workingDir: /app
        command:
          - sh
          - -c
          - |
            npm install -g http-server && \
            http-server ./dist -p 3001 --cors
        ports:
        - containerPort: 3001
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"

---
apiVersion: v1
kind: Service
metadata:
  name: growark-bigscreen-svc
  namespace: default
spec:
  type: LoadBalancer
  selector:
    app: growark-bigscreen
  ports:
  - port: 80
    targetPort: 3001

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: growark-mobile
  namespace: default
spec:
  replicas: 2
  selector:
    matchLabels:
      app: growark-mobile
  template:
    metadata:
      labels:
        app: growark-mobile
    spec:
      containers:
      - name: mobile
        image: node:18-alpine
        workingDir: /app
        command:
          - sh
          - -c
          - |
            npm install -g http-server && \
            http-server ./dist -p 3002 --cors
        ports:
        - containerPort: 3002
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"

---
apiVersion: v1
kind: Service
metadata:
  name: growark-mobile-svc
  namespace: default
spec:
  type: LoadBalancer
  selector:
    app: growark-mobile
  ports:
  - port: 80
    targetPort: 3002
